<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_39) on Fri Apr 25 14:06:46 CEST 2014 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
PaymentSession (bitcoinj 0.11.2 API)
</TITLE>

<META NAME="date" CONTENT="2014-04-25">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PaymentSession (bitcoinj 0.11.2 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/PaymentSession.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.PkiVerificationException.html" title="class in com.google.bitcoin.protocols.payments"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/google/bitcoin/protocols/payments/PaymentSession.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PaymentSession.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.google.bitcoin.protocols.payments</FONT>
<BR>
Class PaymentSession</H2>
<PRE>
<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>com.google.bitcoin.protocols.payments.PaymentSession</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>PaymentSession</B><DT>extends <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
<p>Provides a standard implementation of the Payment Protocol (BIP 0070)</p>

 <p>A PaymentSession can be initialized from one of the following:</p>

 <ul>
 <li>A <A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri"><CODE>BitcoinURI</CODE></A> object that conforms to BIP 0072</li>
 <li>A url where the <CODE>Protos.PaymentRequest</CODE> can be fetched</li>
 <li>Directly with a <CODE>Protos.PaymentRequest</CODE> object</li>
 </ul>

 If initialized with a BitcoinURI or a url, a network request is made for the payment request object and a
 ListenableFuture is returned that will be notified with the PaymentSession object after it is downloaded.

 Once the PaymentSession is initialized, typically a wallet application will prompt the user to confirm that the
 amount and recipient are correct, perform any additional steps, and then construct a list of transactions to pass to
 the sendPayment method.

 Call sendPayment with a list of transactions that will be broadcast. A <CODE>Protos.Payment</CODE> message will be sent to
 the merchant if a payment url is provided in the PaymentRequest.
 NOTE: sendPayment does NOT broadcast the transactions to the bitcoin network.

 sendPayment returns a ListenableFuture that will be notified when a <CODE>Protos.PaymentACK</CODE> is received from the
 merchant. Typically a wallet will show the message to the user as a confirmation message that the payment is now
 "processing" or that an error occurred.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Kevin Greene, Andreas Schildbach</DD>
<DT><B>See Also:</B><DD><a href="https://github.com/bitcoin/bips/blob/master/bip-0070.mediawiki">BIP 0070</a></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.Ack</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Message returned by the merchant in response to a Payment message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.PkiVerificationData.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.PkiVerificationData</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Information about the X509 signature's issuer and subject.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.PkiVerificationData.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.PkiVerificationData</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#pkiVerificationData">pkiVerificationData</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stores the calculated PKI verification data, or null if none is available.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest)">PaymentSession</A></B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest, boolean)">PaymentSession</A></B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request,
               boolean&nbsp;verifyPki)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest, boolean, java.lang.String)">PaymentSession</A></B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request,
               boolean&nbsp;verifyPki,
               <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI)">createFromBitcoinUri</A></B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI, boolean)">createFromBitcoinUri</A></B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri,
                     boolean&nbsp;verifyPki)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI, boolean, java.lang.String)">createFromBitcoinUri</A></B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri,
                     boolean&nbsp;verifyPki,
                     <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromUrl(java.lang.String)">createFromUrl</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromUrl(java.lang.String, boolean)">createFromUrl</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url,
              boolean&nbsp;verifyPki)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#createFromUrl(java.lang.String, boolean, java.lang.String)">createFromUrl</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url,
              boolean&nbsp;verifyPki,
              <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util">Date</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getDate()">getDate</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the date that the payment request was generated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getMemo()">getMemo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the memo included by the merchant in the payment request, or null if not found.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.Payment.html" title="class in org.bitcoin.protocols.payments">Protos.Payment</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getPayment(java.util.List, com.google.bitcoin.core.Address, java.lang.String)">getPayment</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../com/google/bitcoin/core/Transaction.html" title="class in com.google.bitcoin.core">Transaction</A>&gt;&nbsp;txns,
           <A HREF="../../../../../com/google/bitcoin/core/Address.html" title="class in com.google.bitcoin.core">Address</A>&nbsp;refundAddr,
           <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;memo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates a Payment message based on the information in the PaymentRequest.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentDetails.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentDetails</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getPaymentDetails()">getPaymentDetails</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the protobuf that describes the payment to be made.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getPaymentRequest()">getPaymentRequest</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the protobuf that this object was instantiated with.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getPaymentUrl()">getPaymentUrl</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the payment url where the Payment message should be sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../com/google/bitcoin/core/Wallet.SendRequest.html" title="class in com.google.bitcoin.core">Wallet.SendRequest</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getSendRequest()">getSendRequest</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a <CODE>Wallet.SendRequest</CODE> suitable for broadcasting to the network.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html?is-external=true" title="class or interface in java.math">BigInteger</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#getValue()">getValue</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the total amount of bitcoins requested.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#isExpired()">isExpired</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This should always be called before attempting to call sendPayment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.Ack</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#sendPayment(java.util.List, com.google.bitcoin.core.Address, java.lang.String)">sendPayment</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../com/google/bitcoin/core/Transaction.html" title="class in com.google.bitcoin.core">Transaction</A>&gt;&nbsp;txns,
            <A HREF="../../../../../com/google/bitcoin/core/Address.html" title="class in com.google.bitcoin.core">Address</A>&nbsp;refundAddr,
            <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;memo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generates a Payment message and sends the payment to the merchant who sent the PaymentRequest.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.Ack</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#sendPayment(java.net.URL, org.bitcoin.protocols.payments.Protos.Payment)">sendPayment</A></B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</A>&nbsp;url,
            <A HREF="../../../../../org/bitcoin/protocols/payments/Protos.Payment.html" title="class in org.bitcoin.protocols.payments">Protos.Payment</A>&nbsp;payment)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.PkiVerificationData.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.PkiVerificationData</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html#verifyPki()">verifyPki</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uses the provided PKI method to find the corresponding public key and verify the provided signature.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="pkiVerificationData"><!-- --></A><H3>
pkiVerificationData</H3>
<PRE>
public <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.PkiVerificationData.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.PkiVerificationData</A> <B>pkiVerificationData</B></PRE>
<DL>
<DD>Stores the calculated PKI verification data, or null if none is available.
 Only valid after the session is created with verifyPki set to true, or verifyPki() is manually called.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest)"><!-- --></A><H3>
PaymentSession</H3>
<PRE>
public <B>PaymentSession</B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request)
               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.
 Verifies PKI by default.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DL>
<HR>

<A NAME="PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest, boolean)"><!-- --></A><H3>
PaymentSession</H3>
<PRE>
public <B>PaymentSession</B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request,
                      boolean&nbsp;verifyPki)
               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.
 If verifyPki is true, also validates the signature and throws an exception if it fails.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DL>
<HR>

<A NAME="PaymentSession(org.bitcoin.protocols.payments.Protos.PaymentRequest, boolean, java.lang.String)"><!-- --></A><H3>
PaymentSession</H3>
<PRE>
public <B>PaymentSession</B>(<A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A>&nbsp;request,
                      boolean&nbsp;verifyPki,
                      <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                      <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)
               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Creates a PaymentSession from the provided <CODE>Protos.PaymentRequest</CODE>.
 If verifyPki is true, also validates the signature and throws an exception if it fails.
 If trustStorePath is not null, the trust store used for PKI verification will be loaded from the given location
 instead of using the system default trust store location.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI)"><!-- --></A><H3>
createFromBitcoinUri</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromBitcoinUri</B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri)
                                                                                               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.
 uri is a BIP-72-style BitcoinURI object that specifies where the <CODE>Protos.PaymentRequest</CODE> object may
 be fetched in the r= parameter.
 If the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI, boolean)"><!-- --></A><H3>
createFromBitcoinUri</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromBitcoinUri</B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri,
                                                                                                      boolean&nbsp;verifyPki)
                                                                                               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.
 uri is a BIP-72-style BitcoinURI object that specifies where the <CODE>Protos.PaymentRequest</CODE> object may
 be fetched in the r= parameter.
 If verifyPki is specified and the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFromBitcoinUri(com.google.bitcoin.uri.BitcoinURI, boolean, java.lang.String)"><!-- --></A><H3>
createFromBitcoinUri</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromBitcoinUri</B>(<A HREF="../../../../../com/google/bitcoin/uri/BitcoinURI.html" title="class in com.google.bitcoin.uri">BitcoinURI</A>&nbsp;uri,
                                                                                                      boolean&nbsp;verifyPki,
                                                                                                      <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                                                                                      <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)
                                                                                               throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided uri.
 uri is a BIP-72-style BitcoinURI object that specifies where the <CODE>Protos.PaymentRequest</CODE> object may
 be fetched in the r= parameter.
 If verifyPki is specified and the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
 If trustStorePath is not null, the trust store used for PKI verification will be loaded from the given location
 instead of using the system default trust store location.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFromUrl(java.lang.String)"><!-- --></A><H3>
createFromUrl</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromUrl</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url)
                                                                                        throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.
 url is an address where the <CODE>Protos.PaymentRequest</CODE> object may be fetched.
 If verifyPki is specified and the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFromUrl(java.lang.String, boolean)"><!-- --></A><H3>
createFromUrl</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromUrl</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url,
                                                                                               boolean&nbsp;verifyPki)
                                                                                        throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.
 url is an address where the <CODE>Protos.PaymentRequest</CODE> object may be fetched.
 If the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createFromUrl(java.lang.String, boolean, java.lang.String)"><!-- --></A><H3>
createFromUrl</H3>
<PRE>
public static com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession</A>&gt; <B>createFromUrl</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;url,
                                                                                               boolean&nbsp;verifyPki,
                                                                                               <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                                                                               <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;trustStorePath)
                                                                                        throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Returns a future that will be notified with a PaymentSession object after it is fetched using the provided url.
 url is an address where the <CODE>Protos.PaymentRequest</CODE> object may be fetched.
 If the payment request object specifies a PKI method, then the system trust store will
 be used to verify the signature provided by the payment request. An exception is thrown by the future if the
 signature cannot be verified.
 If trustStorePath is not null, the trust store used for PKI verification will be loaded from the given location
 instead of using the system default trust store location.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getMemo()"><!-- --></A><H3>
getMemo</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A>
</FONT>public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getMemo</B>()</PRE>
<DL>
<DD>Returns the memo included by the merchant in the payment request, or null if not found.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getValue()"><!-- --></A><H3>
getValue</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html?is-external=true" title="class or interface in java.math">BigInteger</A> <B>getValue</B>()</PRE>
<DL>
<DD>Returns the total amount of bitcoins requested.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getDate()"><!-- --></A><H3>
getDate</H3>
<PRE>
public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/Date.html?is-external=true" title="class or interface in java.util">Date</A> <B>getDate</B>()</PRE>
<DL>
<DD>Returns the date that the payment request was generated.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isExpired()"><!-- --></A><H3>
isExpired</H3>
<PRE>
public boolean <B>isExpired</B>()</PRE>
<DL>
<DD>This should always be called before attempting to call sendPayment.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPaymentUrl()"><!-- --></A><H3>
getPaymentUrl</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A>
</FONT>public <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A> <B>getPaymentUrl</B>()</PRE>
<DL>
<DD>Returns the payment url where the Payment message should be sent.
 Returns null if no payment url was provided in the PaymentRequest.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSendRequest()"><!-- --></A><H3>
getSendRequest</H3>
<PRE>
public <A HREF="../../../../../com/google/bitcoin/core/Wallet.SendRequest.html" title="class in com.google.bitcoin.core">Wallet.SendRequest</A> <B>getSendRequest</B>()</PRE>
<DL>
<DD>Returns a <CODE>Wallet.SendRequest</CODE> suitable for broadcasting to the network.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sendPayment(java.util.List, com.google.bitcoin.core.Address, java.lang.String)"><!-- --></A><H3>
sendPayment</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A>
</FONT>public com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.Ack</A>&gt; <B>sendPayment</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../com/google/bitcoin/core/Transaction.html" title="class in com.google.bitcoin.core">Transaction</A>&gt;&nbsp;txns,
                                                                                                   <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                                                                                   <A HREF="../../../../../com/google/bitcoin/core/Address.html" title="class in com.google.bitcoin.core">Address</A>&nbsp;refundAddr,
                                                                                                   <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                                                                                   <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;memo)
                                                                                   throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A>,
                                                                                          <A HREF="../../../../../com/google/bitcoin/core/VerificationException.html" title="class in com.google.bitcoin.core">VerificationException</A>,
                                                                                          <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Generates a Payment message and sends the payment to the merchant who sent the PaymentRequest.
 Provide transactions built by the wallet.
 NOTE: This does not broadcast the transactions to the bitcoin network, it merely sends a Payment message to the
 merchant confirming the payment.
 Returns an object wrapping PaymentACK once received.
 If the PaymentRequest did not specify a payment_url, returns null and does nothing.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>txns</CODE> - list of transactions to be included with the Payment message.<DD><CODE>refundAddr</CODE> - will be used by the merchant to send money back if there was a problem.<DD><CODE>memo</CODE> - is a message to include in the payment message sent to the merchant.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/core/VerificationException.html" title="class in com.google.bitcoin.core">VerificationException</A></CODE>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPayment(java.util.List, com.google.bitcoin.core.Address, java.lang.String)"><!-- --></A><H3>
getPayment</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A>
</FONT>public <A HREF="../../../../../org/bitcoin/protocols/payments/Protos.Payment.html" title="class in org.bitcoin.protocols.payments">Protos.Payment</A> <B>getPayment</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;<A HREF="../../../../../com/google/bitcoin/core/Transaction.html" title="class in com.google.bitcoin.core">Transaction</A>&gt;&nbsp;txns,
                                          <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                          <A HREF="../../../../../com/google/bitcoin/core/Address.html" title="class in com.google.bitcoin.core">Address</A>&nbsp;refundAddr,
                                          <FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A></FONT>
                                          <A HREF="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;memo)
                          throws <A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Generates a Payment message based on the information in the PaymentRequest.
 Provide transactions built by the wallet.
 If the PaymentRequest did not specify a payment_url, returns null.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>txns</CODE> - list of transactions to be included with the Payment message.<DD><CODE>refundAddr</CODE> - will be used by the merchant to send money back if there was a problem.<DD><CODE>memo</CODE> - is a message to include in the payment message sent to the merchant.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendPayment(java.net.URL, org.bitcoin.protocols.payments.Protos.Payment)"><!-- --></A><H3>
sendPayment</H3>
<PRE>
protected com.google.common.util.concurrent.ListenableFuture&lt;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.Ack</A>&gt; <B>sendPayment</B>(<A HREF="http://docs.oracle.com/javase/6/docs/api/java/net/URL.html?is-external=true" title="class or interface in java.net">URL</A>&nbsp;url,
                                                                                             <A HREF="../../../../../org/bitcoin/protocols/payments/Protos.Payment.html" title="class in org.bitcoin.protocols.payments">Protos.Payment</A>&nbsp;payment)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="verifyPki()"><!-- --></A><H3>
verifyPki</H3>
<PRE>
<FONT SIZE="-1"><A HREF="http://docs.oracle.com/javase/6/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation">@Nullable</A>
</FONT>public <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.PkiVerificationData.html" title="class in com.google.bitcoin.protocols.payments">PaymentSession.PkiVerificationData</A> <B>verifyPki</B>()
                                             throws <A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></PRE>
<DL>
<DD>Uses the provided PKI method to find the corresponding public key and verify the provided signature.
 Returns null if no PKI method was specified in the <CODE>Protos.PaymentRequest</CODE>.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.html" title="class in com.google.bitcoin.protocols.payments">PaymentRequestException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPaymentRequest()"><!-- --></A><H3>
getPaymentRequest</H3>
<PRE>
public <A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentRequest.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentRequest</A> <B>getPaymentRequest</B>()</PRE>
<DL>
<DD>Returns the protobuf that this object was instantiated with.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getPaymentDetails()"><!-- --></A><H3>
getPaymentDetails</H3>
<PRE>
public <A HREF="../../../../../org/bitcoin/protocols/payments/Protos.PaymentDetails.html" title="class in org.bitcoin.protocols.payments">Protos.PaymentDetails</A> <B>getPaymentDetails</B>()</PRE>
<DL>
<DD>Returns the protobuf that describes the payment to be made.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/PaymentSession.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentRequestException.PkiVerificationException.html" title="class in com.google.bitcoin.protocols.payments"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../com/google/bitcoin/protocols/payments/PaymentSession.Ack.html" title="class in com.google.bitcoin.protocols.payments"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?com/google/bitcoin/protocols/payments/PaymentSession.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PaymentSession.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2014. All rights reserved.
</BODY>
</HTML>
